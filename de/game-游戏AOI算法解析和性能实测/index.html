
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Dieser Artikel erörtert die beiden Algorithmen des Neunfelds und der Kreuzkette und liefert eine praktische Leistungsanalyse beider Algorithmen, damit Sie gut informiert sind und in schwierigen Situationen ruhig bleiben können.">
      
      
        <meta name="author" content="Disenone">
      
      
        <link rel="canonical" href="https://wiki.disenone.site/de/game-%E6%B8%B8%E6%88%8FAOI%E7%AE%97%E6%B3%95%E8%A7%A3%E6%9E%90%E5%92%8C%E6%80%A7%E8%83%BD%E5%AE%9E%E6%B5%8B/">
      
      
        <link rel="prev" href="../py-Python%E6%9D%82%E8%B0%882-Python312-%E7%83%AD%E6%9B%B4%E6%96%B0/">
      
      
        <link rel="next" href="../ue-%E4%BD%BF%E7%94%A8FASTBuild%E7%BC%96%E8%AF%91UE4%E5%92%8CUE5/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS Feed der aktualisierten Inhalte" href="../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../assets/favicon/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>Spiel AOI Algorithmus Analyse und Leistungsprüfung - Disenone's Wiki</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+SC+-+local:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Sans SC - local";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/css/style.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    

   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="4051b5" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#einleitung" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Kopfzeile">
    <a href="../" title="Disenone&#39;s Wiki" class="md-header__button md-logo" aria-label="Disenone's Wiki" data-md-component="logo">
      
  <img src="../../assets/favicon/android-chrome-512x512.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Disenone's Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Spiel AOI Algorithmus Analyse und Leistungsprüfung
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="4051b5" data-md-color-accent="blue"  aria-label="切换暗色模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换暗色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="blue"  aria-label="切换亮色模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换亮色模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0 9.821 9.821 0 0 0-17.64 0"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Sprache wechseln">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../game-%E6%B8%B8%E6%88%8FAOI%E7%AE%97%E6%B3%95%E8%A7%A3%E6%9E%90%E5%92%8C%E6%80%A7%E8%83%BD%E5%AE%9E%E6%B5%8B/" hreflang="zh" class="md-select__link">
              简体中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../zh-Hant/game-%E6%B8%B8%E6%88%8FAOI%E7%AE%97%E6%B3%95%E8%A7%A3%E6%9E%90%E5%92%8C%E6%80%A7%E8%83%BD%E5%AE%9E%E6%B5%8B/" hreflang="zh-Hant" class="md-select__link">
              繁體中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../en/game-%E6%B8%B8%E6%88%8FAOI%E7%AE%97%E6%B3%95%E8%A7%A3%E6%9E%90%E5%92%8C%E6%80%A7%E8%83%BD%E5%AE%9E%E6%B5%8B/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../es/game-%E6%B8%B8%E6%88%8FAOI%E7%AE%97%E6%B3%95%E8%A7%A3%E6%9E%90%E5%92%8C%E6%80%A7%E8%83%BD%E5%AE%9E%E6%B5%8B/" hreflang="es" class="md-select__link">
              Español
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../ja/game-%E6%B8%B8%E6%88%8FAOI%E7%AE%97%E6%B3%95%E8%A7%A3%E6%9E%90%E5%92%8C%E6%80%A7%E8%83%BD%E5%AE%9E%E6%B5%8B/" hreflang="ja" class="md-select__link">
              日本語
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="de" class="md-select__link">
              Deutsch
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../fr/game-%E6%B8%B8%E6%88%8FAOI%E7%AE%97%E6%B3%95%E8%A7%A3%E6%9E%90%E5%92%8C%E6%80%A7%E8%83%BD%E5%AE%9E%E6%B5%8B/" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../ar/game-%E6%B8%B8%E6%88%8FAOI%E7%AE%97%E6%B3%95%E8%A7%A3%E6%9E%90%E5%92%8C%E6%80%A7%E8%83%BD%E5%AE%9E%E6%B5%8B/" hreflang="ar" class="md-select__link">
              العربية
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
        <button type="reset" class="md-search__icon md-icon" title="Zurücksetzen" aria-label="Zurücksetzen" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/disenone/wiki_blog" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Hauptnavigation" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../cpp-C%E5%92%8CCpp%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0%E5%A4%84%E7%90%86%E6%80%BB%E7%BB%93/" class="md-tabs__link">
          
  
    
  
  Programmiertechniken

        </a>
      </li>
    
  

    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
    
  
  Spieleentwicklung

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../" title="Disenone&#39;s Wiki" class="md-nav__button md-logo" aria-label="Disenone's Wiki" data-md-component="logo">
      
  <img src="../../assets/favicon/android-chrome-512x512.png" alt="logo">

    </a>
    Disenone's Wiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/disenone/wiki_blog" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Programmiertechniken
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Programmiertechniken
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C/C++
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            C/C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cpp-C%E5%92%8CCpp%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0%E5%A4%84%E7%90%86%E6%80%BB%E7%BB%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zusammenfassung zur Verarbeitung von Befehlszeilenparametern in C/C++
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cpp-C%E5%92%8CCpp%E5%AE%8F%E7%BC%96%E7%A8%8B%E8%A7%A3%E6%9E%90/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C/C++ Makroprogrammierung Analyse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cpp-%E7%BC%96%E5%86%99Windows%E4%B8%8B%E7%9A%84MemoryLeakDetector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schreiben Sie einen Memory Leak Detector für Windows.
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cpp-KCP%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KCP Quellcode-Analyse
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../py-%E4%BD%BF%E7%94%A8VisualStudio2015%E7%BC%96%E8%AF%91Python2.7.11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visual Studio 2015 verwenden, um Python 2.7.11 zu kompilieren
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../py-Python%E6%9D%82%E8%B0%881-%E6%8E%A2%E7%A9%B6__builtins__/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python Plauderei 1 - Erforschung von __builtins__
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../py-Python%E6%9D%82%E8%B0%882-Python312-%E7%83%AD%E6%9B%B4%E6%96%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python Plauderei 2 - Python3.12 Hot Update
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Spieleentwicklung
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Spieleentwicklung
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Grundlagen
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Grundlagen
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Spiel AOI Algorithmus Analyse und Leistungsprüfung
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Spiel AOI Algorithmus Analyse und Leistungsprüfung
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#einleitung" class="md-nav__link">
    <span class="md-ellipsis">
      Einleitung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#das-heit-gitter-auf-deutsch" class="md-nav__link">
    <span class="md-ellipsis">
      Das heißt "Gitter" auf Deutsch.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kreuzverkettete-liste" class="md-nav__link">
    <span class="md-ellipsis">
      Kreuzverkettete Liste
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#die-umsetzung-des-sudoku-rasters" class="md-nav__link">
    <span class="md-ellipsis">
      Die Umsetzung des Sudoku-Rasters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#die-implementierung-einer-verketteten-liste" class="md-nav__link">
    <span class="md-ellipsis">
      Die Implementierung einer verketteten Liste.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leistungstest" class="md-nav__link">
    <span class="md-ellipsis">
      Leistungstest
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Leistungstest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#neun-gitter-test" class="md-nav__link">
    <span class="md-ellipsis">
      Neun-Gitter-Test
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kreuzverkettungstest" class="md-nav__link">
    <span class="md-ellipsis">
      Kreuzverkettungstest
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zusammenfassung" class="md-nav__link">
    <span class="md-ellipsis">
      Zusammenfassung
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    UE
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            UE
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ue-%E4%BD%BF%E7%94%A8FASTBuild%E7%BC%96%E8%AF%91UE4%E5%92%8CUE5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Verwenden von FASTBuild zum Kompilieren von UE4 und UE5
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ue-%E9%80%9A%E8%BF%87%E6%8F%92%E4%BB%B6%E6%BA%90%E7%A0%81%E6%B7%BB%E5%8A%A0%E6%8F%92%E4%BB%B6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UE fügt Plugins über den Plugin-Quellcode hinzu.
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ue-%E6%89%A9%E5%B1%95%E7%BC%96%E8%BE%91%E5%99%A8%E8%8F%9C%E5%8D%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UE Erweiterungseditor-Menü
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ue-%E4%BD%BF%E7%94%A8%E8%B7%AF%E5%BE%84%E5%BD%A2%E5%BC%8F%E6%89%A9%E5%B1%95%E8%8F%9C%E5%8D%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UE verwendet eine Pfadform zur Erweiterung des Menüs.
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ue-%E8%AE%BE%E7%BD%AE%E6%9C%AC%E5%9C%B0%E5%8C%96%E5%A4%9A%E8%AF%AD%E8%A8%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UE lokale Mehrsprachigkeit einstellen
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ue-%E5%9B%BE%E7%89%87-%E5%90%84%E7%A7%8D%E5%9B%BE%E7%89%87%E6%93%8D%E4%BD%9C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UE implementiert verschiedene Bild (UTexture2D) Operationen (lesen, speichern, kopieren, Zwischenablage...)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ue-%E7%BC%96%E8%BE%91%E5%99%A8%E6%8F%92%E4%BB%B6-EditorPlus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UE.EditorPlus Documentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ue-%E6%8F%92%E4%BB%B6-AIChatPlus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UE Plugin AIChatPlus User Manual
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Unity
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Unity
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../unity-Unity%E7%AC%AC%E4%B8%89%E4%BA%BA%E7%A7%B0%E7%9B%B8%E6%9C%BA%E6%9E%84%E5%BB%BA%28%E4%B8%8A%29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unity Third-Person Camera Setup (Part 1)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../unity-Unity%E7%AC%AC%E4%B8%89%E4%BA%BA%E7%A7%B0%E7%9B%B8%E6%9C%BA%E6%9E%84%E5%BB%BA%28%E4%B8%8B%29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unity Dritte-Person-Kamera-Setup (Teil 2)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../unity-Unity%E4%BA%BA%E7%89%A9%E6%8E%A7%E5%88%B6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Steuerung von Unity-Charakteren
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../unity-Unity%E7%94%BB%E6%B7%B1%E5%BA%A6%E5%9B%BE%E5%92%8C%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unity erstellt Tiefenkarte (Depth Map) und Kantenerkennung (Edge Detection)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../unity-Unity%E5%AE%9E%E7%8E%B0%E4%BD%93%E7%A7%AF%E5%85%89%E7%85%A7%E6%95%A3%E5%B0%84/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unity implementiert volumetrische Lichtstreuung (Volumetric Light Scattering, Cloud Gaps Light)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#einleitung" class="md-nav__link">
    <span class="md-ellipsis">
      Einleitung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#das-heit-gitter-auf-deutsch" class="md-nav__link">
    <span class="md-ellipsis">
      Das heißt "Gitter" auf Deutsch.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kreuzverkettete-liste" class="md-nav__link">
    <span class="md-ellipsis">
      Kreuzverkettete Liste
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#die-umsetzung-des-sudoku-rasters" class="md-nav__link">
    <span class="md-ellipsis">
      Die Umsetzung des Sudoku-Rasters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#die-implementierung-einer-verketteten-liste" class="md-nav__link">
    <span class="md-ellipsis">
      Die Implementierung einer verketteten Liste.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leistungstest" class="md-nav__link">
    <span class="md-ellipsis">
      Leistungstest
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Leistungstest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#neun-gitter-test" class="md-nav__link">
    <span class="md-ellipsis">
      Neun-Gitter-Test
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kreuzverkettungstest" class="md-nav__link">
    <span class="md-ellipsis">
      Kreuzverkettungstest
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zusammenfassung" class="md-nav__link">
    <span class="md-ellipsis">
      Zusammenfassung
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/disenone/wiki_blog/edit/main/docs/de/game-游戏AOI算法解析和性能实测.md" title="Seite editieren" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


  <h1>Spiel AOI Algorithmus Analyse und Leistungsprüfung</h1>

<div><p><meta property="og:title" content="游戏 AOI 算法解析和性能实测"></p>
<h3 id="einleitung">Einleitung</h3>
<p><code>AOI</code> (Area Of Interest) ist eine grundlegende Funktion in Mehrspielerspielen, bei der Spieler Informationen über andere Spieler oder Entitäten (Entity) erhalten, die in ihren Sichtbereich eintreten. Die Algorithmen, die berechnen, welche Entitäten sich im Sichtbereich eines Spielers befinden und welche Entitäten diesen Bereich betreten oder verlassen, nennen wir im Allgemeinen den <code>AOI</code>-Algorithmus.</p>
<p>Dieser Artikel behandelt zwei <code>AOI</code>-Algorithmen, das Neunfeldraster und die Kreuzverkettung, und bietet eine Leistungsanalyse der beiden Algorithmen aus praktischen Tests, damit du genau weißt, wie du sie einsetzen kannst, und in schwierigen Situationen ruhig bleibst.</p>
<p>Im Text werden die Begriffe Spieler und Entität erwähnt. Eine Entität ist das Konzept eines Objekts im Spiel, während der Spieler eine Entität ist, die über AOI verfügt.</p>
<p>Der Code im Text kann hier gefunden werden: <a href="https://github.com/disenone/AoiTesting">AoiTesting</a>。</p>
<h3 id="das-heit-gitter-auf-deutsch">Das heißt "Gitter" auf Deutsch.</h3>
<p>Der Begriff "Nine Grid" bezieht sich darauf, dass die Positionen aller Entitäten in einer Szene in Gitter unterteilt werden, beispielsweise in Quadrate mit einer Seitenlänge von 200. Um andere Entitäten im AOI-Bereich des Zentralplayers zu finden, müssen alle Spieler untersucht werden, die sich in den Gittern dieses Bereichs befinden.</p>
<p>For example, in every 100 milliseconds, a tick occurs in the scene. During the tick, we can update the player's AOI in this way:</p>
<ul>
<li>Basierend auf der Position des Spielers umfasst die AOI-Radiusberechnung die Menge der betroffenen Felder.
Berechnen Sie den Abstand jedes Elements aus der Gittersammlung zum Spieler.
Die Menge der Entitäten, deren Abstand kleiner als der AOI-Radius ist, bildet den neuen AOI des Spielers.</li>
</ul>
<p>Der Sudoku-Algorithmus ist einfach umzusetzen, er lässt sich in wenigen Sätzen klar beschreiben. Eine detaillierte Leistungsanalyse werden wir später durchführen, zunächst schauen wir uns den Kreuzketten-Algorithmus an.</p>
<h3 id="kreuzverkettete-liste">Kreuzverkettete Liste</h3>
<p>Für 3D-Spiele erstellen wir normalerweise geordnete Listen für die X- und Z-Achsenkoordinaten. Jede Entität hat einen Knoten in der Liste, der den Koordinatenwert enthält. Die Werte werden in aufsteigender Reihenfolge gespeichert. Wenn jedoch nur die Koordinatenpunkte der Entität gespeichert werden, ist die Effizienz der Abfrage in diesen beiden Listen immer noch sehr gering.</p>
<p>Das wirklich Entscheidende ist, dass wir in der verketteten Liste für jeden Spieler mit AOI zwei Wächterknoten hinzufügen, einen links und einen rechts. Die Koordinaten der beiden Wächter unterscheiden sich genau um den AOI-Radius von den Koordinaten des Spielers selbst. Zum Beispiel, wenn die Koordinaten des Spielers <code>P</code> <code>(a, b, c)</code> sind und der AOI-Radius <code>r</code> beträgt, dann gibt es auf der X-Achse zwei Wächter <code>left_x</code> und <code>right_x</code>, deren Koordinaten <code>a - r</code> und <code>a + r</code> sind. Durch das Vorhandensein der Wächter können wir die AOI aktualisieren, indem wir die Bewegung der Wächter und anderer Entitätsknoten verfolgen. Um das vorherige Beispiel fortzuführen: Wenn sich eine Entität <code>E</code> bewegt und somit auf der X-Achse vom rechten Bereich von <code>left_x</code> nach links über <code>left_x</code> hinweg in den linken Bereich von <code>left_x</code> gelangt, bedeutet das, dass <code>E</code> definitiv die AOI von <code>P</code> verlassen hat; ebenso, wenn sie nach rechts über <code>right_x</code> hinausgeht, verlässt sie ebenfalls die AOI. Im Gegensatz dazu, wenn sie nach rechts über <code>left_x</code> oder nach links über <code>right_x</code> überschreitet, könnte dies bedeuten, dass sie möglicherweise in die AOI von <code>P</code> eintritt.</p>
<p>Es ist zu erkennen, dass der Algorithmus der Kreuzliste viel komplexer ist als das Sudoku. Wir müssen zwei geordnete Listen pflegen und bei jeder Aktualisierung der Entitätskoordinaten die Knoten in der Liste synchron verschieben und AOI aktualisieren, wenn sie andere Knoten überqueren.</p>
<h3 id="die-umsetzung-des-sudoku-rasters">Die Umsetzung des Sudoku-Rasters</h3>
<p>Da es sich um die tatsächliche Leistung handelt, lassen Sie uns zunächst etwas tiefer in die Implementierungsdetails des 3x3-Grid-Algorithmus eintauchen:</p>
<div class="language-cpp highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Sensor</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">  </span><span class="c1">// ...</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">  </span><span class="n">Nuid</span><span class="w"> </span><span class="n">sensor_id</span><span class="p">;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">  </span><span class="kt">float</span><span class="w"> </span><span class="n">radius</span><span class="p">;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">  </span><span class="kt">float</span><span class="w"> </span><span class="n">radius_square</span><span class="p">;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">  </span><span class="n">PlayerPtrList</span><span class="w"> </span><span class="n">aoi_players</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="p">};</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="k">struct</span><span class="w"> </span><span class="nc">PlayerAoi</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">  </span><span class="c1">// ...    </span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">  </span><span class="n">Nuid</span><span class="w"> </span><span class="n">nuid</span><span class="p">;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">  </span><span class="n">SquareId</span><span class="w"> </span><span class="n">square_id</span><span class="p">;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">square_index</span><span class="p">;</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">  </span><span class="n">Pos</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">  </span><span class="n">Pos</span><span class="w"> </span><span class="n">last_pos</span><span class="p">;</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">  </span><span class="n">Uint32</span><span class="w"> </span><span class="n">flags</span><span class="p">;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Sensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">sensors</span><span class="p">;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="p">};</span>
</code></pre></div>
<p><code>PlayerAoi</code> speichert die Daten der Spieler, darunter ein <code>sensors</code> Array, das zur Berechnung von Entitäten innerhalb eines bestimmten Bereichs dient. Nach jedem <code>Tick</code> werden die berechneten Entitäten im <code>aoi_players</code> geplant. <code>aoi_players</code> enthält zwei Arrays, die verwendet werden, um die Ergebnisse des vorherigen <code>Ticks</code> zu vergleichen und die Spieler zu ermitteln, die eingetreten oder ausgestiegen sind. Der grobe Ablauf eines <code>Ticks</code> ist wie folgt:</p>
<div class="language-cpp highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">AoiUpdateInfos</span><span class="w"> </span><span class="nf">SquareAoi::Tick</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="n">AoiUpdateInfos</span><span class="w"> </span><span class="n">update_infos</span><span class="p">;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="n">PlayerPtrList</span><span class="w"> </span><span class="n">remove_list</span><span class="p">;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">elem</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">player_map_</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">player</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">elem</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="c1">// Berechnung von Aoi für Spieler mit Sensoren</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">player</span><span class="p">.</span><span class="n">sensors</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">      </span><span class="k">auto</span><span class="w"> </span><span class="n">update_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_UpdatePlayerAoi</span><span class="p">(</span><span class="n">cur_aoi_map_idx_</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">player</span><span class="p">);</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">update_info</span><span class="p">.</span><span class="n">sensor_update_list</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">        </span><span class="n">update_infos</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">update_info</span><span class="p">.</span><span class="n">nuid</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">update_info</span><span class="p">));</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">  </span><span class="c1">// ...</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="c1">// Aufzeichnen der vorherigen Position des Spielers</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">elem</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">player_map_</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">    </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">player</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">elem</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">    </span><span class="n">player</span><span class="p">.</span><span class="n">last_pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">player</span><span class="p">.</span><span class="n">pos</span><span class="p">;</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">  </span><span class="n">cur_aoi_map_idx_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">cur_aoi_map_idx_</span><span class="p">;</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">update_infos</span><span class="p">;</span>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="p">}</span>
</code></pre></div>
<p>Die von <code>Tick</code> ausgeführten Aufgaben sind recht einfach. Es durchläuft die Spieler mit Sensoren und berechnet jeden einzelnen die Entitäten im Bereich des Sensors, also den AOI. <code>last_pos</code> wird verwendet, um zu überprüfen, ob eine Entität den AOI betreten oder verlassen hat. Der Code für <code>_UpdatePlayerAoi</code> sieht folgendermaßen aus:</p>
<div class="language-cpp highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">AoiUpdateInfo</span><span class="w"> </span><span class="nf">SquareAoi::_UpdatePlayerAoi</span><span class="p">(</span><span class="n">Uint32</span><span class="w"> </span><span class="n">cur_aoi_map_idx</span><span class="p">,</span><span class="w"> </span><span class="n">PlayerAoi</span><span class="o">*</span><span class="w"> </span><span class="n">pptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">  </span><span class="n">AoiUpdateInfo</span><span class="w"> </span><span class="n">aoi_update_info</span><span class="p">;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span><span class="n">aoi_update_info</span><span class="p">.</span><span class="n">nuid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pptr</span><span class="o">-&gt;</span><span class="n">nuid</span><span class="p">;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span><span class="n">Uint32</span><span class="w"> </span><span class="n">new_aoi_map_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">cur_aoi_map_idx</span><span class="p">;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sensor</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">pptr</span><span class="o">-&gt;</span><span class="n">sensors</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">old_aoi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sensor</span><span class="p">.</span><span class="n">aoi_players</span><span class="p">[</span><span class="n">cur_aoi_map_idx</span><span class="p">];</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">    </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">new_aoi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sensor</span><span class="p">.</span><span class="n">aoi_players</span><span class="p">[</span><span class="n">new_aoi_map_idx</span><span class="p">];</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;*</span><span class="n">calc_aoi_players_func_</span><span class="p">)(</span><span class="o">*</span><span class="n">pptr</span><span class="p">,</span><span class="w"> </span><span class="n">sensor</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">new_aoi</span><span class="p">);</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">    </span><span class="n">SensorUpdateInfo</span><span class="w"> </span><span class="n">update_info</span><span class="p">;</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">    </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">enters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">update_info</span><span class="p">.</span><span class="n">enters</span><span class="p">;</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">    </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">leaves</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">update_info</span><span class="p">.</span><span class="n">leaves</span><span class="p">;</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">radius_square</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sensor</span><span class="p">.</span><span class="n">radius_square</span><span class="p">;</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">    </span><span class="n">_CheckLeave</span><span class="p">(</span><span class="n">pptr</span><span class="p">,</span><span class="w"> </span><span class="n">radius_square</span><span class="p">,</span><span class="w"> </span><span class="n">old_aoi</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">leaves</span><span class="p">);</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">    </span><span class="n">_CheckEnter</span><span class="p">(</span><span class="n">pptr</span><span class="p">,</span><span class="w"> </span><span class="n">radius_square</span><span class="p">,</span><span class="w"> </span><span class="n">new_aoi</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">enters</span><span class="p">);</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">enters</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">leaves</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">      </span><span class="k">continue</span><span class="p">;</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">    </span><span class="n">update_info</span><span class="p">.</span><span class="n">sensor_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sensor</span><span class="p">.</span><span class="n">sensor_id</span><span class="p">;</span>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">    </span><span class="n">aoi_update_info</span><span class="p">.</span><span class="n">sensor_update_list</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">update_info</span><span class="p">));</span>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a>
<a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">aoi_update_info</span><span class="p">;</span>
<a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a><span class="p">}</span>
</code></pre></div>
<p><code>old_aoi</code> ist die vorherige AOI, die durch den letzten <code>Tick</code> berechnet wurde, und <code>new_aoi</code> ist die AOI, die im aktuellen <code>Tick</code> berechnet werden muss. <code>new_aoi</code> wird ermittelt, indem alle Entitäten in der AOI-Reichweite durchsucht werden, um diejenigen auszuwählen, die sich innerhalb des AOI-Radius befinden. Anschließend werden die Funktionen <code>_CheckLeave</code> und <code>_CheckEnter</code> verwendet, um die Entitäten zu berechnen, die in diesem <code>Tick</code> die AOI verlassen oder betreten. Zum Beispiel, wenn die Entität <code>last_pos</code> in <code>new_aoi</code> nicht innerhalb der AOI-Reichweite ist, bedeutet dies, dass diese Entität in diesem <code>Tick</code> in die AOI-Reichweite eingetreten ist. Der spezifische Code kann in den Quelltexten eingesehen werden, hier wird nicht weiter darauf eingegangen.</p>
<h3 id="die-implementierung-einer-verketteten-liste">Die Implementierung einer verketteten Liste.</h3>
<p>Im Vergleich zum 3x3-Gitter ist die Implementierung der Kreuzlisten komplexer. Schauen wir uns zunächst die grundlegende Datenstruktur an:</p>
<div class="language-cpp highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">CoordNode</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="c1">// ...</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">  </span><span class="n">Uint8</span><span class="w"> </span><span class="n">type</span><span class="p">;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">  </span><span class="kt">float</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">  </span><span class="n">CoordNode</span><span class="w"> </span><span class="o">*</span><span class="n">prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">  </span><span class="n">CoordNode</span><span class="w"> </span><span class="o">*</span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">  </span><span class="n">PlayerAoi</span><span class="w"> </span><span class="o">*</span><span class="n">pplayer</span><span class="p">;</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">  </span><span class="n">Sensor</span><span class="w"> </span><span class="o">*</span><span class="n">psensor</span><span class="p">;</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="p">};</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="n">KHASH_MAP_INIT_INT64</span><span class="p">(</span><span class="n">SensorHashMap</span><span class="p">,</span><span class="w"> </span><span class="n">PlayerAoi</span><span class="o">*</span><span class="p">);</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Sensor</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">  </span><span class="c1">// ...</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">  </span><span class="n">Nuid</span><span class="w"> </span><span class="n">sensor_id</span><span class="p">;</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">  </span><span class="kt">float</span><span class="w"> </span><span class="n">radius</span><span class="p">;</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w">  </span><span class="kt">float</span><span class="w"> </span><span class="n">radius_square</span><span class="p">;</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="w">  </span><span class="n">PlayerAoi</span><span class="w"> </span><span class="o">*</span><span class="n">pplayer</span><span class="p">;</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="w">  </span><span class="n">CoordNode</span><span class="w"> </span><span class="n">left_x</span><span class="p">;</span>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="w">  </span><span class="n">CoordNode</span><span class="w"> </span><span class="n">right_x</span><span class="p">;</span>
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="w">  </span><span class="n">CoordNode</span><span class="w"> </span><span class="n">left_z</span><span class="p">;</span>
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="w">  </span><span class="n">CoordNode</span><span class="w"> </span><span class="n">right_z</span><span class="p">;</span>
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="w">  </span><span class="n">PlayerPtrList</span><span class="w"> </span><span class="n">aoi_players</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">khash_t</span><span class="p">(</span><span class="n">SensorHashMap</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">aoi_player_candidates</span><span class="p">;</span>
<a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a><span class="p">};</span>
<a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>
<a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a><span class="k">struct</span><span class="w"> </span><span class="nc">PlayerAoi</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a><span class="w">  </span><span class="c1">// ...</span>
<a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a><span class="w">  </span><span class="n">Nuid</span><span class="w"> </span><span class="n">nuid</span><span class="p">;</span>
<a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a><span class="w">  </span><span class="n">Pos</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span>
<a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a><span class="w">  </span><span class="n">Pos</span><span class="w"> </span><span class="n">last_pos</span><span class="p">;</span>
<a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a><span class="w">  </span><span class="n">Uint32</span><span class="w"> </span><span class="n">flags</span><span class="p">;</span>
<a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a><span class="w">  </span><span class="n">CoordNode</span><span class="w"> </span><span class="n">node_x</span><span class="p">;</span>
<a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a><span class="w">  </span><span class="n">CoordNode</span><span class="w"> </span><span class="n">node_z</span><span class="p">;</span>
<a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Sensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">sensors</span><span class="p">;</span>
<a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">boost</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">Nuid</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Nuid</span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">detected_by</span><span class="p">;</span>
<a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a><span class="p">};</span>
</code></pre></div>
<p><code>Sensor</code> und <code>PlayerAoi</code> haben einige Ähnlichkeiten mit dem 3x3-Raster, haben jedoch eine zusätzliche verkettete Liste namens <code>CoordNode</code>. <code>CoordNode</code> ist ein Knoten in der Liste und speichert den Typ und den Wert des Knotens selbst, wobei es drei Typen gibt: Spielerknoten, <code>Sensor</code>-Linksknoten und <code>Sensor</code>-Rechtsknoten.</p>
<p>Die meiste Arbeit bei einer verketteten Liste wird dafür verwendet, die Ordnung der Liste aufrechtzuerhalten:</p>
<p>Wenn ein Spieler beitritt, muss der Spielerknoten an eine geordnete Position verschoben werden und dabei gleichzeitig Ereignisse für das Betreten oder Verlassen anderer Spieler im AOI behandeln.
* Nachdem der Spieler die richtige Position erreicht hat, bewegen sich die <code>Sensor</code>-Links und -Rechts von der Vorder- und Rückseite des Spielers aus zur richtigen Position und verarbeiten die Ein- und Austrittsevents, die ausgelöst werden, wenn sie andere Spielernodes überschreiten.
* Wenn der Spieler sich bewegt, aktualisieren Sie die Koordinaten des Spielers und bewegen Sie den Spieler-Knoten sowie die Knoten <code>Sensor</code> nach links und rechts, um das Eintreten und Verlassen des AOI zu verarbeiten.</p>
<p>Der Code für den beweglichen Knoten lautet wie folgt. Jedes Mal, wenn ein Knoten überschritten wird, wird die Funktion <code>MoveCross</code> aufgerufen. Abhängig von der Bewegungsrichtung, dem beweglichen Knoten und dem Typ des überschrittenen Knotens entscheidet die Funktion <code>MoveCross</code>, ob der Knoten den AOI betritt oder verlässt.</p>
<div class="language-cpp highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">ListUpdateNode</span><span class="p">(</span><span class="n">CoordNode</span><span class="w"> </span><span class="o">**</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">CoordNode</span><span class="w"> </span><span class="o">*</span><span class="n">pnode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">  </span><span class="kt">float</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pnode</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pnode</span><span class="o">-&gt;</span><span class="n">next</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">pnode</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="c1">// move right</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">cur_node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pnode</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">      </span><span class="n">MoveCross</span><span class="p">(</span><span class="n">MOVE_DIRECTION_RIGHT</span><span class="p">,</span><span class="w"> </span><span class="n">pnode</span><span class="p">,</span><span class="w"> </span><span class="n">cur_node</span><span class="p">);</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">cur_node</span><span class="o">-&gt;</span><span class="n">next</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">cur_node</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">value</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">      </span><span class="n">cur_node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cur_node</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">    </span><span class="n">ListRemove</span><span class="p">(</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">pnode</span><span class="p">);</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">    </span><span class="n">ListInsertAfter</span><span class="p">(</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">cur_node</span><span class="p">,</span><span class="w"> </span><span class="n">pnode</span><span class="p">);</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pnode</span><span class="o">-&gt;</span><span class="n">prev</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">pnode</span><span class="o">-&gt;</span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">    </span><span class="c1">// move left</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">cur_node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pnode</span><span class="o">-&gt;</span><span class="n">prev</span><span class="p">;</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="w">      </span><span class="n">MoveCross</span><span class="p">(</span><span class="n">MOVE_DIRECTION_LEFT</span><span class="p">,</span><span class="w"> </span><span class="n">pnode</span><span class="p">,</span><span class="w"> </span><span class="n">cur_node</span><span class="p">);</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">cur_node</span><span class="o">-&gt;</span><span class="n">prev</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">cur_node</span><span class="o">-&gt;</span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">value</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a><span class="w">      </span><span class="n">cur_node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cur_node</span><span class="o">-&gt;</span><span class="n">prev</span><span class="p">;</span>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="w">    </span><span class="n">ListRemove</span><span class="p">(</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">pnode</span><span class="p">);</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w">    </span><span class="n">ListInsertBefore</span><span class="p">(</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">cur_node</span><span class="p">,</span><span class="w"> </span><span class="n">pnode</span><span class="p">);</span>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="p">}</span>
</code></pre></div>
<p>Die Bewegung der verketteten Liste ist ziemlich langsam und hat eine Komplexität von <code>O(n)</code>, insbesondere wenn ein neuer Spieler in die Szene kommt. Der Spieler muss von weit entfernt allmählich zur richtigen Position bewegt werden, was eine große Menge an durchlaufenden Knoten erfordert und zu erheblichem Ressourcenverbrauch führt. Um die Leistung zu optimieren, können wir in der Szene fest installierte Leuchttürme platzieren. Diese Leuchttürme funktionieren ähnlich wie Spieler, speichern jedoch zusätzlich Daten in Bezug auf <code>detected_by</code>, um festzuhalten, welche <code>Sensor</code>-Bereiche die Wächterentität erfasst. Wenn ein Spieler zum ersten Mal in die Szene gelangt, beginnt er nicht mehr von den entferntesten Positionen, sondern sucht nach dem nächstgelegenen Leuchtturm. Der Spieler wird dann neben dem Leuchtturm eingefügt und kann durch die Daten in <code>detected_by</code> auf dem Leuchtturm schneller in den AOI-Bereich anderer Spieler gelangen, die mit dem Leuchtturm übereinstimmen. Anschließend erfolgt die Bewegung zur richtigen Position, wobei auch das Betreten und Verlassen berücksichtigt wird. Ebenso können Sensoren durch Vererbung der Daten der Leuchttürme optimiert werden, um sich von der Position der Leuchttürme zur richtigen Position zu bewegen. Diese beiden Optimierungsansätze können die Leistung bei der Einfügung von Spielern um mehr als das Doppelte verbessern.</p>
<p><code>Sensor</code> hat auch eine <code>HashMap</code> namens <code>aoi_player_candidates</code> (hier wurde zu Leistungszwecken <a href="https://github.com/attractivechaos/klib/blob/master/khash.h">khash</a>Die durch die Bewegung des Knotens ausgelöste AOI-Ereignis kann tatsächlich nur ein quadratisches Gebiet mit einer Seitenlänge von <code>2r</code> auf der X-Z-Achse erfassen, nicht das, was wir im strengen Sinne als kreisförmiges Gebiet der AOI betrachten. Alle Entitäten innerhalb dieses quadratischen Gebiets werden in <code>aoi_player_candidates</code> aufgezeichnet und im <code>Tick</code> durchlaufen, um den AOI-Bereich innerhalb des kreisförmigen Gebiets zu berechnen, weshalb es als <code>candidates</code> bezeichnet wird.</p>
<p>Alle Operationen der Cross-Linked-Listen sind darauf ausgerichtet, die Entitäten in einem quadratischen Bereich, die sogenannten <code>candidates</code>, kontinuierlich zu warten. Die Operationen, die Tick in der Cross-Linked-Liste durchführt, sind fast identisch mit dem Neun-Felder-Raster, nur das Iterieren und Berechnen der <code>candidates</code> für den AOI unterscheiden sich. Die <code>candidates</code> im Neun-Felder-Raster sind die Entitäten in den Feldern, die vom AOI-Kreisbereich abgedeckt werden, während die Cross-Linked-Liste die Entitäten im quadratischen Bereich mit einer Kantenlänge von <code>2r</code> definiert ist, die durch die linke und rechte Nachbarknoten des Sensors begrenzt wird. Qualitativ gesehen werden die <code>candidates</code> in den Cross-Linked-Listen normalerweise weniger sein als im Neun-Felder-Raster, was zu weniger Iterationen in Tick führt und somit eine bessere Leistung bringt. Allerdings verursacht die Cross-Linked-Liste zusätzlichen Leistungsverbrauch bei der Listenwartung. Die Gesamtleistung der beiden Ansätze ist daher noch unbekannt. Wir werden dies in den kommenden Tests genauer untersuchen.</p>
<h3 id="leistungstest">Leistungstest</h3>
<p>Ich habe jeweils die Zeit für drei Situationen gemessen: wenn ein Spieler dem Szenario beitritt („Spieler hinzufügen“), beim Berechnen von AOI-Eintritts- und Austrittsereignissen („Tick“) und wenn sich die Spielerposition aktualisiert („Position aktualisieren“).</p>
<p>Die Anfangsposition der Spieler wird zufällig innerhalb des Kartenbereichs generiert, gefolgt von der Hinzufügung der Spieler zur Szene. <code>player_num</code> ist die Anzahl der Spieler, während <code>map_size</code> den Bereich der X-Z-Koordinaten der Karte beschreibt. Die Position der Spieler wird gleichmäßig zufällig innerhalb dieses Bereichs generiert, wobei jeder Spieler einen <code>Sensor</code> mit einem Radius von <code>100</code> besitzt, der als AOI dient. Die Zeitberechnung erfolgt mit <code>boost::timer::cpu_timer</code>. Für <code>player_num</code> wurden die drei Werte <code>100, 1000, 10000</code> gewählt, während <code>map_size</code> die vier Werte <code>[-50, 50], [-100, 100], [-1000, 1000], [-10000, 10000]</code> umfasst.</p>
<p>Aktualisieren der Spielerposition wird den Spieler in einer festen zufälligen Richtung bewegen, mit einer Geschwindigkeit von <code>6m/s</code>.</p>
<p>Die Testumgebung lautet:</p>
<ul>
<li>CPU: Intel(R) Core(TM) i5-4590 CPU @ 3.30GHz</li>
<li>System: Debian GNU/Linux 10 (buster)</li>
<li>gcc 版本: gcc Version 8.3.0 (Debian 8.3.0-6)</li>
<li>Boost-Version: boost_1_75_0</li>
</ul>
<h4 id="neun-gitter-test">Neun-Gitter-Test</h4>
<p>Die Testergebnisse des Sudoku-Gitters sind wie folgt:</p>
<div class="language-python highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">50.000000</span><span class="p">,</span> <span class="mf">50.000000</span><span class="p">)</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000081</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000452</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000230</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">100.000000</span><span class="p">,</span> <span class="mf">100.000000</span><span class="p">)</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000070</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000338</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000185</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">1000.000000</span><span class="p">,</span> <span class="mf">1000.000000</span><span class="p">)</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000084</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000103</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000187</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">10000.000000</span><span class="p">,</span> <span class="mf">10000.000000</span><span class="p">)</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000084</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000080</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000185</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">50.000000</span><span class="p">,</span> <span class="mf">50.000000</span><span class="p">)</span>
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000673</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.035298</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.030000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.030000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">85.0</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.001841</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">100.000000</span><span class="p">,</span> <span class="mf">100.000000</span><span class="p">)</span>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000664</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.025806</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.030000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.030000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">116.3</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.001842</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a>
<a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">1000.000000</span><span class="p">,</span> <span class="mf">1000.000000</span><span class="p">)</span>
<a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000721</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.001793</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.001849</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">540.8</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a>
<a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">10000.000000</span><span class="p">,</span> <span class="mf">10000.000000</span><span class="p">)</span>
<a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000885</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000804</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.001855</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a>
<a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">50.000000</span><span class="p">,</span> <span class="mf">50.000000</span><span class="p">)</span>
<a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.006454</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">154.9</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">3.822028</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">3.800000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.020000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">3.820000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">99.9</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.018402</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.020000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.020000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">108.7</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-5-54" name="__codelineno-5-54" href="#__codelineno-5-54"></a>
<a id="__codelineno-5-55" name="__codelineno-5-55" href="#__codelineno-5-55"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">100.000000</span><span class="p">,</span> <span class="mf">100.000000</span><span class="p">)</span>
<a id="__codelineno-5-56" name="__codelineno-5-56" href="#__codelineno-5-56"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.006439</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-57" name="__codelineno-5-57" href="#__codelineno-5-57"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">2.805551</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">2.760000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.040000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">2.800000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">99.8</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-58" name="__codelineno-5-58" href="#__codelineno-5-58"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.018489</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">54.1</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-59" name="__codelineno-5-59" href="#__codelineno-5-59"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-5-60" name="__codelineno-5-60" href="#__codelineno-5-60"></a>
<a id="__codelineno-5-61" name="__codelineno-5-61" href="#__codelineno-5-61"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">1000.000000</span><span class="p">,</span> <span class="mf">1000.000000</span><span class="p">)</span>
<a id="__codelineno-5-62" name="__codelineno-5-62" href="#__codelineno-5-62"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.006698</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">149.3</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-63" name="__codelineno-5-63" href="#__codelineno-5-63"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.093759</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.100000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.100000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">106.7</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-64" name="__codelineno-5-64" href="#__codelineno-5-64"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.018350</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">54.5</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-65" name="__codelineno-5-65" href="#__codelineno-5-65"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-5-66" name="__codelineno-5-66" href="#__codelineno-5-66"></a>
<a id="__codelineno-5-67" name="__codelineno-5-67" href="#__codelineno-5-67"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">10000.000000</span><span class="p">,</span> <span class="mf">10000.000000</span><span class="p">)</span>
<a id="__codelineno-5-68" name="__codelineno-5-68" href="#__codelineno-5-68"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.009046</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">110.6</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-69" name="__codelineno-5-69" href="#__codelineno-5-69"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.012091</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">82.7</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-70" name="__codelineno-5-70" href="#__codelineno-5-70"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.019033</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.020000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.020000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">105.1</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-5-71" name="__codelineno-5-71" href="#__codelineno-5-71"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
</code></pre></div>
<p>Beim Spielermenge von <code>100</code> sind die Zeiten für die drei Operationen sehr gering. Im Extremfall <code>map_size = [-50, 50]</code>, befinden sich alle Spieler im AOI-Bereich zueinander, die <code>Tick</code>-Dauer beträgt etwa <code>0,4ms</code>. Das Hinzufügen von Spielern zur Szene und die Aktualisierung der Koordinaten haben beide eine lineare Komplexität von <code>O(player_num)</code>, die Leistungsfähigkeit ist daher recht gut. Bei <code>player_num = 10000</code> und <code>map_size = [-50, 50]</code>, wenn die Anzahl der Spieler 10.000 erreicht, können <code>Add Player</code> und <code>Update Pos</code>, aufgrund ihrer linearen Natur, in wenigen Millisekunden abgeschlossen werden. Doch die <code>Tick</code>-Dauer steigt auf <code>3,8s</code>, was eine enorme CPU-Belastung darstellt und unbrauchbar ist. Bei 10.000 Spielern und einer Karten Größe von <code>[-1000, 1000]</code> beträgt die <code>Tick</code>-Zeit etwa <code>94ms</code>. Falls die <code>Tick</code>-Frequenz gesenkt werden kann, beispielsweise auf zweimal pro Sekunde, wäre es immer noch in einem akzeptablen Bereich.</p>
<h4 id="kreuzverkettungstest">Kreuzverkettungstest</h4>
<p>Die Testergebnisse der Kreuzverkettung sind wie folgt:</p>
<div class="language-python highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">50.000000</span><span class="p">,</span> <span class="mf">50.000000</span><span class="p">)</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.002057</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000330</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000232</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">100.000000</span><span class="p">,</span> <span class="mf">100.000000</span><span class="p">)</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.001201</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000222</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000272</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">1000.000000</span><span class="p">,</span> <span class="mf">1000.000000</span><span class="p">)</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000288</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000048</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000200</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">10000.000000</span><span class="p">,</span> <span class="mf">10000.000000</span><span class="p">)</span>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000194</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000041</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000192</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">50.000000</span><span class="p">,</span> <span class="mf">50.000000</span><span class="p">)</span>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.130766</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.130000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.130000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">99.4</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.028091</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.020000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.020000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">71.2</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.005369</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">186.2</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a>
<a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">100.000000</span><span class="p">,</span> <span class="mf">100.000000</span><span class="p">)</span>
<a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.103015</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.100000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.100000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">97.1</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.019545</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.020000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.020000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">102.3</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.009208</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">108.6</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a>
<a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">1000.000000</span><span class="p">,</span> <span class="mf">1000.000000</span><span class="p">)</span>
<a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.010150</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">98.5</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000845</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.003023</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a>
<a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">10000.000000</span><span class="p">,</span> <span class="mf">10000.000000</span><span class="p">)</span>
<a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.004950</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">202.0</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.000427</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-46" name="__codelineno-6-46" href="#__codelineno-6-46"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.002234</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">a</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-47" name="__codelineno-6-47" href="#__codelineno-6-47"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-6-48" name="__codelineno-6-48" href="#__codelineno-6-48"></a>
<a id="__codelineno-6-49" name="__codelineno-6-49" href="#__codelineno-6-49"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">50.000000</span><span class="p">,</span> <span class="mf">50.000000</span><span class="p">)</span>
<a id="__codelineno-6-50" name="__codelineno-6-50" href="#__codelineno-6-50"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">21.606402</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">21.040000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.570000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">21.610000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">100.0</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-51" name="__codelineno-6-51" href="#__codelineno-6-51"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">3.696885</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">3.680000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.030000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">3.710000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">100.4</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-52" name="__codelineno-6-52" href="#__codelineno-6-52"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.434396</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.430000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.430000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">99.0</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-53" name="__codelineno-6-53" href="#__codelineno-6-53"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-6-54" name="__codelineno-6-54" href="#__codelineno-6-54"></a>
<a id="__codelineno-6-55" name="__codelineno-6-55" href="#__codelineno-6-55"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">100.000000</span><span class="p">,</span> <span class="mf">100.000000</span><span class="p">)</span>
<a id="__codelineno-6-56" name="__codelineno-6-56" href="#__codelineno-6-56"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">18.499235</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">18.470000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.020000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">18.490000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">100.0</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-57" name="__codelineno-6-57" href="#__codelineno-6-57"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">2.292608</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">2.290000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">2.290000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">99.9</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-58" name="__codelineno-6-58" href="#__codelineno-6-58"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">1.522617</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">1.530000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">1.530000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">100.5</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-59" name="__codelineno-6-59" href="#__codelineno-6-59"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-6-60" name="__codelineno-6-60" href="#__codelineno-6-60"></a>
<a id="__codelineno-6-61" name="__codelineno-6-61" href="#__codelineno-6-61"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">1000.000000</span><span class="p">,</span> <span class="mf">1000.000000</span><span class="p">)</span>
<a id="__codelineno-6-62" name="__codelineno-6-62" href="#__codelineno-6-62"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">1.642519</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">1.640000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">1.640000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">99.8</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-63" name="__codelineno-6-63" href="#__codelineno-6-63"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.042767</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.050000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.050000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">116.9</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-64" name="__codelineno-6-64" href="#__codelineno-6-64"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.202949</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.200000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.200000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">98.5</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-65" name="__codelineno-6-65" href="#__codelineno-6-65"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
<a id="__codelineno-6-66" name="__codelineno-6-66" href="#__codelineno-6-66"></a>
<a id="__codelineno-6-67" name="__codelineno-6-67" href="#__codelineno-6-67"></a><span class="o">===</span><span class="n">Begin</span> <span class="n">Milestore</span><span class="p">:</span> <span class="n">player_num</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">map_size</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">10000.000000</span><span class="p">,</span> <span class="mf">10000.000000</span><span class="p">)</span>
<a id="__codelineno-6-68" name="__codelineno-6-68" href="#__codelineno-6-68"></a><span class="n">Add</span> <span class="n">Player</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.571257</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.570000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.570000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">99.8</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-69" name="__codelineno-6-69" href="#__codelineno-6-69"></a><span class="n">Tick</span> <span class="p">(</span><span class="mi">1</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.006325</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.010000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">158.1</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-70" name="__codelineno-6-70" href="#__codelineno-6-70"></a><span class="n">Update</span> <span class="n">Pos</span> <span class="p">(</span><span class="mi">10</span> <span class="n">times</span><span class="p">)</span> <span class="mf">0.042568</span><span class="n">s</span> <span class="n">wall</span><span class="p">,</span> <span class="mf">0.040000</span><span class="n">s</span> <span class="n">user</span> <span class="o">+</span> <span class="mf">0.000000</span><span class="n">s</span> <span class="n">system</span> <span class="o">=</span> <span class="mf">0.040000</span><span class="n">s</span> <span class="n">CPU</span> <span class="p">(</span><span class="mf">94.0</span><span class="o">%</span><span class="p">)</span>
<a id="__codelineno-6-71" name="__codelineno-6-71" href="#__codelineno-6-71"></a><span class="o">===</span><span class="n">End</span> <span class="n">Milestore</span>
</code></pre></div>
<p>Wenn wir eine Analyse machen, dauert es bei der Hex-Liste länger für <code>Add Player</code> und <code>Update Pos</code>, besonders bei <code>Add Player</code>. Im Vergleich zur Gitterliste ist die Leistung um Hunderte oder sogar Tausende Male schlechter (<code>100, [-50, 50]</code> Hex-Liste braucht <code>2ms</code>, während die Gitterliste nur <code>0,08ms</code> benötigt; <code>10000, [-50, 50]</code> Hex-Liste braucht <code>21,6s</code>, die Gitterliste nur <code>6ms</code>). Die Dauer von <code>Update Pos</code> kann auch um ein Vielfaches unterschiedlich sein, <code>10000, [-100, 100]</code> Hex-Liste braucht <code>1,5s</code> zur Aktualisierung der Spielerposition, während die Gitterliste nur <code>18ms</code> benötigt. Es ist offensichtlich, dass bei der Hex-Liste die oberen und unteren Grenzen der Zeit, die für <code>Add Player</code> und <code>Update Pos</code> benötigt werden, größer sind als bei der Gitterliste. Sie sind stärker von der Anzahl der Spieler und der Größe der Karte abhängig. In dicht besiedelten Gebieten wird die Leistung dieser beiden Vorgänge stark beeinträchtigt, bis sie unbrauchbar werden.</p>
<p>Im Vergleich zur <code>Tick</code>-Operation der Kreuzkette ist die Gesamtleistung tatsächlich besser als die des 3x3-Rasters. Im besten Fall dauert es nur etwa die Hälfte der Zeit des 3x3-Rasters (bei <code>1000, [-1000, 1000]</code> benötigt die Kreuzkette <code>0,8 ms</code>, das 3x3-Raster <code>1,8 ms</code>). Allerdings kann die Kreuzkette im schlechtesten Fall in die Nähe der Leistung des 3x3-Rasters zurückfallen (bei <code>10000, [-10000, 10000]</code> benötigt die Kreuzkette <code>3,7 s</code>, das 3x3-Raster <code>3,8 s</code>). Das liegt daran, dass die Szenen klein sind und die Spieler sich alle innerhalb der AOI-Bereiche des anderen befinden, sodass die Anzahl der <code>candidates</code>, die die Kreuzkette bei <code>Tick</code> durchläuft, tatsächlich schon sehr nah an der des 3x3-Rasters ist.</p>
<p>Der Kreuz-Kettenmechanismus muss besser als das 3x3-Gitter sein. Dafür sind einige stärkere Annahmen erforderlich, wie zum Beispiel bei einer Anzahl von <code>1000</code> Spielern und einer Kartenfläche von <code>[-1000, 1000]</code>, beträgt die Zeit, die ein <code>Tick</code> in der Kreuz-Kettenmechanismus nimmt, <code>0,8ms</code>, im 3x3-Gitter <code>1,8ms</code>, die Aktualisierung der Position in der Kreuz-Kettenmechanismus braucht <code>0,3ms</code>, im 3x3-Gitter <code>0,18ms</code> (Achten Sie darauf, dass die Zeit für die Aktualisierung der Position die Summe der Zeiten für 10 mal Durchführung ist). Bei der Gesamtzeit von <code>Tick + Update Pos</code> darf die Anzahl der <code>Update Pos</code>-Aktualisierungen in der Kreuz-Kettenmechanismus nicht mehr als <code>8</code> Mal den <code>Tick</code> überschreiten, oder anders gesagt, zwischen zwei <code>Tick</code>-Operationen sollte die Anzahl der <code>Update Pos</code>-Aktualisierungen weniger als <code>8</code> Mal erfolgen. Außerdem ist der Prozess für das Hinzufügen von Spielern in der Kreuz-Kettenmechanismus sehr aufwändig und daher nicht für Szenarien geeignet, in denen Spieler häufig kurz hintereinander in oder aus Szenen eintreten oder in Szenen weit teleportiert werden. Darüber hinaus kann eine große Anzahl von Spielern, die kurz hintereinander in eine Szene eintreten, leicht zu einer Leistungsverschlechterung führen und die CPU stark belasten.</p>
<p>Für die Kreuzverkettungsliste kann unter einer Voraussetzung eine Optimierung vorgenommen werden: das Entfernen von <code>Tick</code>, vorausgesetzt, das Spiel akzeptiert quadratische AOIs und die zusätzlich zu den Quadrat-AOIs entstehenden Kosten in Bezug auf das Netzwerk sind akzeptabel. Diese Voraussetzung ist jedoch relativ streng, denn in Spielen nimmt der CPU-Verbrauch durch die AOI-Berechnung normalerweise nicht viel Platz ein. Wenn man jedoch runde AOIs in quadratische AOIs umwandelt, kann dies die Fläche der AOI vergrößern und die Anzahl der Spieler im Bereich erhöhen, sodass die Spielerzahl bei gleichmäßiger Verteilung möglicherweise um das 1,27-Fache ansteigt. Sollte diese Voraussetzung jedoch erfüllt sein, kann die Kreuzverkettungsliste auf eine regelmäßige Aktualisierung von AOI-Ereignissen ohne <code>Tick</code> verzichten, da die <code>candidates</code> der Kreuzverkettungsliste bereits ein quadratisches AOI verwalten, das ursprünglich nur zur Berechnung des runden AOIs diente, wobei man gezwungen war, im <code>Tick</code> zusätzlich die Abstände zu berechnen. In diesem Fall könnte die Kreuzverkettungsliste eine ausgezeichnete Leistung erzielen, denn die Leistung des <code>Update Pos</code> der Kreuzverkettungsliste kann um mehrere bis zu Dutzende von Malen im Vergleich zum <code>Tick</code> variieren.</p>
<p>Bitte geben Sie schließlich ein Säulendiagramm mit dem Vergleich beider.</p>
<p><a class="glightbox" href="../../assets/img/2021-11-18-aoi-tesing/add_player.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../assets/img/2021-11-18-aoi-tesing/add_player.png"></a></p>
<p><a class="glightbox" href="../../assets/img/2021-11-18-aoi-tesing/tick.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../assets/img/2021-11-18-aoi-tesing/tick.png"></a></p>
<p><a class="glightbox" href="../../assets/img/2021-11-18-aoi-tesing/update_pos.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../assets/img/2021-11-18-aoi-tesing/update_pos.png"></a></p>
<h3 id="zusammenfassung">Zusammenfassung</h3>
<p>In this article, we introduced the principles and basic implementations of two AOI algorithms (Nine-patch and Cross-link), and analyzed the performance advantages and disadvantages of these two algorithms through measured data, hoping to provide readers with some help or inspiration.</p>
<p>Im Allgemeinen ist die Nine-Cell-Methode einfach umzusetzen und ermöglicht eine ausgewogene Leistung, ohne große Probleme. Sie ist besonders gut geeignet für AOI-Spiele, bei denen die Leistung nicht zum Engpass wird. Die Leistungsschwankungen der Nine-Cell-Methode liegen in einem erwartbaren Rahmen und die Mindestleistung ist ziemlich hoch, sodass sie nicht leicht zum Engpass führt. Auf der anderen Seite bietet sie jedoch wenig Optimierungsspielraum und die Zeitkomplexität ist relativ fest. Im Gegensatz dazu ist die Cross-Chain-Methode komplexer in der Umsetzung und bietet eine niedrigere Mindestleistung im Vergleich zur Nine-Cell-Methode. Allerdings kann die Cross-Chain-Methode, wenn bestimmte Annahmen und Voraussetzungen erfüllt sind, einen höheren Optimierungsspielraum bieten, oder anders ausgedrückt, ein höheres Potenzial haben. Beide Methoden haben Vor- und Nachteile, und in der Spieleindustrie haben verschiedene Engines sich für eine der beiden entschieden, je nach Bedarf und Meinung.</p>
<p>Meine Fähigkeiten sind begrenzt, der Inhalt des Textes spiegelt lediglich meine Gedanken wider. Bei Unzulänglichkeiten oder Ungereimtheiten bin ich offen für Kommentare und Diskussionen.</p>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!-- 转载声明 && visit -->
<blockquote>
<p>Original: <a href="https://wiki.disenone.site/de">https://wiki.disenone.site/de</a></p>
<p>This post is protected by <a href="https://creativecommons.org/licenses/by/4.0/deed.en">CC BY-NC-SA 4.0</a> agreement, should be reproduced with attribution.</p>
</blockquote>
<!-- 转载 -->
<div class="a2a_kit a2a_kit_size_32 a2a_default_style" data-a2a-icon-color="#4051b5">
    <a class="a2a_dd" href="https://www.addtoany.com/share"></a>
    <a class="a2a_button_copy_link"></a>
    <a class="a2a_button_wechat"></a>
    <a class="a2a_button_reddit"></a>
    <a class="a2a_button_google_gmail"></a>
    <a class="a2a_button_pocket"></a>
</div>
<script async src="https://static.addtoany.com/menu/page.js"></script>

<!-- 评论 -->
<script src="https://giscus.app/client.js" data-repo="disenone/wiki" data-repo-id="R_kgDOKz9PQg" data-category="Announcements" data-category-id="DIC_kwDOKz9PQs4Cbbvv" data-mapping="og:title" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="preferred_color_scheme" data-lang="de" data-loading="lazy" crossorigin="anonymous" async>
</script>

<!-- visit -->
<blockquote>
<p></p><p class="copyright text-muted"><span id="busuanzi_container_site_uv"> <span id="busuanzi_value_site_uv"></span> Visitors. </span> <span id="busuanzi_container_site_pv"> <span id="busuanzi_value_site_pv"></span> Total Visits. </span> <span id="busuanzi_container_page_pv"> <span id="busuanzi_value_page_pv"></span> Page Visits. </span></p>
<p>(https://github.com/disenone/wiki_blog/issues/new)Bitte weisen Sie auf alle ausgelassenen Stellen hin. </p>
</blockquote></div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Letztes Update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-custom">2025-01-31</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Erstellt">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-custom">2025-01-04</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Zurück zum Seitenanfang
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Fußzeile" >
        
          
          <a href="../py-Python%E6%9D%82%E8%B0%882-Python312-%E7%83%AD%E6%9B%B4%E6%96%B0/" class="md-footer__link md-footer__link--prev" aria-label="Zurück: Python Plauderei 2 - Python3.12 Hot Update">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Zurück
              </span>
              <div class="md-ellipsis">
                Python Plauderei 2 - Python3.12 Hot Update
              </div>
            </div>
          </a>
        
        
          
          <a href="../ue-%E4%BD%BF%E7%94%A8FASTBuild%E7%BC%96%E8%AF%91UE4%E5%92%8CUE5/" class="md-footer__link md-footer__link--next" aria-label="Weiter: Verwenden von FASTBuild zum Kompilieren von UE4 und UE5">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Weiter
              </span>
              <div class="md-ellipsis">
                Verwenden von FASTBuild zum Kompilieren von UE4 und UE5
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2014 - 2024 by <a href="https://github.com/disenone"> Disenone </a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.annotate", "content.code.select", "content.action.edit", "content.tooltips", "navigation.tracking", "navigation.tabs", "navigation.footer", "navigation.sections", "navigation.indexes", "toc.follow", "navigation.top", "search.suggest"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version": "Version ausw\u00e4hlen"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>